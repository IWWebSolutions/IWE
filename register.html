<!doctype html>
<html class="no-js" lang="zxx">
    
<!-- login-register31:27-->
<div id="head"></div>
<body>
    <div id="header"></div>
    <!-- Begin Li's Breadcrumb Area -->
    <div class="breadcrumb-area">
        <div class="container">
            <div class="breadcrumb-content">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li class="active">Register</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Li's Breadcrumb Area End Here -->
    <!-- Begin Login Content Area -->
    <div class="page-section mb-60"> 
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-50 col-xs-12">
                    <form id="signupForm" action="#" method="POST">
                        <div class="login-form">
                            <h4 class="login-title">Create Merchant Account</h4>
                            <div class="row">
                                <div class="col-md-12 mb-20">
                                    <label>Already have an account?<span><a href="login.html"> Log in instead!</a></span></label>
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Your Name</label>
                                    <input class="mb-0" type="text" placeholder="Name" name="name" id="name">
                                </div>
                                <div class="col-md-12 mb-20">
                                    <label>Email Address*</label>
                                    <input class="mb-0" type="email" placeholder="Email Address" id="email" name="email">
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Password</label>
                                    <input class="mb-0" type="password" placeholder="Password" id="password" name="password">
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Confirm Password</label>
                                    <input class="mb-0" type="password" placeholder="Confirm Password" id="confirm_password" name="confirm_password">
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Phone Number</label>
                                    <input class="mb-0" type="text" placeholder="Number" id="phone_no" name="phone_no">
                                </div><br>
                                <div class="col-md-12 mb-20">
                                    <label>Company Name</label>
                                    <input class="mb-0" type="text" placeholder="Company" id="company_name" name="company_name">
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Business Type</label>
                                    <select id="business_type" name="business_type">
                                        <option value="work">--Select--</option>
                                        <option value="personal">All</option>
                                        <option value="other">Exporter</option>
                                        <option value="other">Supplier</option>
                                        <option value="other">Manufacturer</option>
                                        <option value="other">Retailer</option>
                                        <option value="other">Distributor</option>
                                        <option value="other">Importer</option>
                                        <option value="other">Trader</option>
                                        <option value="other">Whole-seller</option>
                                    </select>
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Company Website</label>
                                    <input class="mb-0" type="text" placeholder="Website" id="company_website" name="company_website">
                                </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Country</label>
                                    <select id="country_name" name="country_name">
                                        <option value="work">--Select--</option>
                                        <option value="personal">India</option>
                                    </select>
                                </div>
                                <div class="col-md-6 col-12 mb-20"> 
                                    <label for="state">State</label>
                                    <select id="state" name="state" class="mb-0">
                                        <option value="">Select State</option>
                                    </select>
                                    </div>
                                    <div class="col-md-6 col-12 mb-20">
                                    <label for="city">City</label>
                                    <select id="city" name="city" class="mb-0">
                                        <option value="">Select City</option>
                                    </select>
                                    </div>
                                <div class="col-md-6 col-12 mb-20">
                                    <label>Address</label>
                                    <input class="mb-0" type="text" placeholder="Address" id="address" name="address">
                                </div>
                                <div class="col-md-12 mb-20">
                                    <label>Company Services and Products</label>
                                    <input class="mb-0" type="text" placeholder="Services" id="company_services" name="company_services">
                                </div>
                                <div class="col-12">
                                    <button type="submit" id="registerButton" class="register-button mt-0">Register</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Login Content Area End Here -->
    <!-- Begin Footer Area -->
    <div class="footer">
        <!-- Begin Footer Static Top Area -->
        <div class="footer-static-top">
            <div class="container">
                <!-- Begin Footer Shipping Area -->
                <div class="footer-shipping pt-60 pb-55 pb-xs-25">
                    <div class="row">
                        <!-- Begin Li's Shipping Inner Box Area -->
                        <div class="col-lg-3 col-md-6 col-sm-6 pb-sm-55 pb-xs-55">
                            <div class="li-shipping-inner-box">
                                <div class="shipping-icon">
                                    <img src="images/shipping-icon/1.png" alt="Shipping Icon">
                                </div>
                                <div class="shipping-text">
                                    <h2>Free Delivery</h2>
                                    <p>And free returns. See checkout for delivery dates.</p>
                                </div>
                            </div>
                        </div>
                        <!-- Li's Shipping Inner Box Area End Here -->
                        <!-- Begin Li's Shipping Inner Box Area -->
                        <div class="col-lg-3 col-md-6 col-sm-6 pb-sm-55 pb-xs-55">
                            <div class="li-shipping-inner-box">
                                <div class="shipping-icon">
                                    <img src="images/shipping-icon/2.png" alt="Shipping Icon">
                                </div>
                                <div class="shipping-text">
                                    <h2>Safe Payment</h2>
                                    <p>Pay with the world's most popular and secure payment methods.</p>
                                </div>
                            </div>
                        </div>
                        <!-- Li's Shipping Inner Box Area End Here -->
                        <!-- Begin Li's Shipping Inner Box Area -->
                        <div class="col-lg-3 col-md-6 col-sm-6 pb-xs-30">
                            <div class="li-shipping-inner-box">
                                <div class="shipping-icon">
                                    <img src="images/shipping-icon/3.png" alt="Shipping Icon">
                                </div>
                                <div class="shipping-text">
                                    <h2>Shop with Confidence</h2>
                                    <p>Our Buyer Protection covers your purchasefrom click to delivery.</p>
                                </div>
                            </div>
                        </div>
                        <!-- Li's Shipping Inner Box Area End Here -->
                        <!-- Begin Li's Shipping Inner Box Area -->
                        <div class="col-lg-3 col-md-6 col-sm-6 pb-xs-30">
                            <div class="li-shipping-inner-box">
                                <div class="shipping-icon">
                                    <img src="images/shipping-icon/4.png" alt="Shipping Icon">
                                </div>
                                <div class="shipping-text">
                                    <h2>24/7 Help Center</h2>
                                    <p>Have a question? Call a Specialist or chat online.</p>
                                </div>
                            </div>
                        </div>
                        <!-- Li's Shipping Inner Box Area End Here -->
                    </div>
                </div>
                <!-- Footer Shipping Area End Here -->
            </div>
        </div>
        <!-- Footer Static Top Area End Here -->
        <div id="footer"></div>
    </div>
    <!-- Footer Area End Here -->

    <!-- Body Wrapper End Here -->
    <!-- jQuery-V1.12.4 -->
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <!-- Popper js -->
    <script src="js/vendor/popper.min.js"></script>
    <!-- Bootstrap V4.1.3 Fremwork js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Ajax Mail js -->
    <script src="js/ajax-mail.js"></script>
    <!-- Meanmenu js -->
    <script src="js/jquery.meanmenu.min.js"></script>
    <!-- Wow.min js -->
    <script src="js/wow.min.js"></script>
    <!-- Slick Carousel js -->
    <script src="js/slick.min.js"></script>
    <!-- Owl Carousel-2 js -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- Magnific popup js -->
    <script src="js/jquery.magnific-popup.min.js"></script>
    <!-- Isotope js -->
    <script src="js/isotope.pkgd.min.js"></script>
    <!-- Imagesloaded js -->
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <!-- Mixitup js -->
    <script src="js/jquery.mixitup.min.js"></script>
    <!-- Countdown -->
    <script src="js/jquery.countdown.min.js"></script>
    <!-- Counterup -->
    <script src="js/jquery.counterup.min.js"></script>
    <!-- Waypoints -->
    <script src="js/waypoints.min.js"></script>
    <!-- Barrating -->
    <script src="js/jquery.barrating.min.js"></script>
    <!-- Jquery-ui -->
    <script src="js/jquery-ui.min.js"></script>
    <!-- Venobox -->
    <script src="js/venobox.min.js"></script>
    <!-- Nice Select js -->
    <script src="js/jquery.nice-select.min.js"></script>
    <!-- ScrollUp js -->
    <script src="js/scrollUp.min.js"></script>
    <!-- Main/Activator js -->
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('head.html')
                .then(res => {
                    if (!res.ok) throw new Error('Head file not found');
                    return res.text();
                })
                .then(data => {
                    document.getElementById('head').innerHTML = data;
                })
                .catch(error => console.error('Error loading head:', error));
            fetch('header.html')
                .then(res => {
                    if (!res.ok) throw new Error('Header file not found');
                    return res.text();
                })
                .then(data => {
                    document.getElementById('header').innerHTML = data;
                })
                .catch(error => console.error('Error loading header:', error));
            fetch('footer.html')
                .then(res => {
                    if (!res.ok) throw new Error('Footer file not found');
                    return res.text();
                })
                .then(data => {
                    document.getElementById('footer').innerHTML = data;
                })
                .catch(error => console.error('Error loading footer:', error));
        });

        document.addEventListener("DOMContentLoaded", function() {
            // Change href dynamically for .redirect links
            document.querySelectorAll(".redirect").forEach(link => {
                link.setAttribute("href", "maintenance.html");

                link.addEventListener("click", function(event) {
                    event.preventDefault();
                    window.location.href = "maintenance.html";
                });
            });

            // Change href dynamically for .soon links
            document.querySelectorAll(".soon").forEach(link => {
                link.setAttribute("href", "coming-soon.html");

                link.addEventListener("click", function(event) {
                    event.preventDefault();
                    window.location.href = "coming-soon.html";
                });
            });
        });

        document.getElementById("registerButton").addEventListener("click", function(event) {
            event.preventDefault(); // Prevent form submission (remove if form submission is needed)
            window.location.href = "membership.html"; // Redirect to membership page
        });

        const statesApi = "https://api.countrystatecity.in/v1/countries/IN/states";
        const citiesApi = "https://api.countrystatecity.in/v1/countries/IN/states/{stateCode}/cities";

        const stateSelect = document.getElementById("state");
        const citySelect = document.getElementById("city");

        // Fetch states dynamically
        async function fetchStates() {
            try {
                const response = await fetch(statesApi, {
                headers: {
                    "X-CSCAPI-KEY": "SXFqYmtKSjlhWEl4TlE5bXRGa2VCSWFpTGp4cG5PZVQwSTlLT1BZbA==", // Replace with your actual API key
                },
                });

                if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const states = await response.json();

                // Populate states dropdown
                states.forEach((state) => {
                const option = document.createElement("option");
                option.value = state.iso2; // Use the state's ISO code as the value
                option.textContent = state.name;
                stateSelect.appendChild(option);
                });
            } catch (error) {
                console.error("Error fetching states:", error);
            }
        }

        // Fetch cities dynamically based on selected state
        stateSelect.addEventListener("change", async () => {
        const selectedState = stateSelect.value;

        // Reset city options
        citySelect.innerHTML = '<option value="">Select City</option>';

        if (selectedState) {
            try {
            const response = await fetch(citiesApi.replace("{stateCode}", selectedState), {
                headers: {
                "X-CSCAPI-KEY": "SXFqYmtKSjlhWEl4TlE5bXRGa2VCSWFpTGp4cG5PZVQwSTlLT1BZbA==", // Replace with your actual API key
                },
            });

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const cities = await response.json();

            // Populate cities dropdown
            cities.forEach((city) => {
                const option = document.createElement("option");
                option.value = city.name; // Use city name as the value
                option.textContent = city.name;
                citySelect.appendChild(option);
            });
            } catch (error) {
            console.error("Error fetching cities:", error);
            }
        }
        });

        // Call fetchStates on page load to populate state dropdown
        fetchStates();

    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("signupForm");
            if (form) {
                form.addEventListener("submit", function (event) {
                    event.preventDefault();

                    const name = document.getElementById("name").value;
                    const email = document.getElementById("email").value;
                    const password = document.getElementById("password").value;
                    const confirmPassword = document.getElementById("confirm_password").value;
                    const phone_no = document.getElementById("phone_no").value;
                    const company_name = document.getElementById("company_name").value;
                    const business_type = document.getElementById("business_type").value;
                    const company_website = document.getElementById("company_website").value;
                    const state = document.getElementById("state").value;
                    const city = document.getElementById("city").value;
                    const address = document.getElementById("address").value;
                    const company_services = document.getElementById("company_services").value;

                    // Basic validation for password match
                    if (password !== confirmPassword) {
                        const passwordError = document.getElementById("passwordError");
                        if (passwordError) {
                            passwordError.textContent = "Passwords do not match.";
                        }
                        return;
                    }

                    const data = {
                        name,
                        email,
                        password,
                        phone_no,
                        company_name,
                        business_type,
                        company_website,
                        state,
                        city,
                        address,
                        company_services
                    };

                    // Send data to Django backend API
                    fetch("http://127.0.0.1:8000/signup/", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data)
                    })
                    .then(response => response.json())
                    .then(responseData => {
                        console.log("Success:", responseData);
                        if (responseData.msg === "Your account has been created") {
                            window.location.href = "http://127.0.0.1:5501/login.html";
                        } else {
                            console.error("Signup failed:", responseData);
                        }
                    })
                    .catch(error => {
                        console.error("Error:", error);
                    });
                });
            } else {
                console.error("Form with ID 'signupForm' not found!");
            }
        });
    </script>

</body>
</html>
